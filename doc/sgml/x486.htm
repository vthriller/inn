<HTML
><HEAD
><TITLE
>File Descriptor Limits&#13;</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.40"><LINK
REL="HOME"
HREF="book1.htm"><LINK
REL="UP"
TITLE="Welcome to INN 2.3!
"
HREF="c4.htm"><LINK
REL="PREVIOUS"
TITLE="Setting Up the Cron Jobs
"
HREF="x472.htm"><LINK
REL="NEXT"
TITLE="Starting the System
"
HREF="x500.htm"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x472.htm"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 0. Welcome to INN 2.3!</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x500.htm"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="POD2DOCBOOK-CH-1-SECT-10"
>File Descriptor Limits</A
></H1
><P
></P
><P
>INN likes to use a <I
CLASS="EMPHASIS"
>lot</I
> of file descriptors, particularly if you have a lot of peers. Depending on
what your system defaults are, you may need to make sure the default limit
is increased for INN (particularly innd and innfeed). This is vital on
Solaris, which defaults (at least as of 2.6) to an absurdly low limit of 64
file descriptors per process.
&#13;</P
><P
>One way to increase the number of file descriptors is to set rlimitnofile
in <I
CLASS="EMPHASIS"
>inn.conf</I
> to a higher value. This will cause startinnfeed and inndstart, the setuid
root wrapper scripts that start innfeed and innd respectively, to increase
the file descriptor limits before they run the regular INN programs. Note,
however, that you won't be able to increase the limits above the hard
limits set by your operating system; on some systems, that hard limit is
256 file descriptors (Linux, for example). On others, like Solaris, it's
1024. Increasing the limit beyond that value may require serious system
configuration work (on Linux, patching and recompiling the kernel; on
Solaris 2.6 or earlier, the limit cannot be increased beyond 1024 without
breaking <TT
CLASS="LITERAL"
>select()</TT
> and thereby breaking all of INN).
&#13;</P
><P
>256 file descriptors will probably be enough for all but the largest site.
There is no harm in setting the limits higher than you actually need
(provided they're set to something lower than or equal to your system hard
limit). 256 is therefore a reasonable value to try.
&#13;</P
><P
>If you're installing INN on a Solaris system, particularly if you're
installing it on a dedicated news server machine, it may be easier to just
increase the default file descriptor limit across the board for all
processes. You can do that by putting the line:
&#13;</P
><P
><PRE
CLASS="SCREEN"
>    set rlim_fd_cur = 1024</PRE
>
&#13;</P
><P
>in <I
CLASS="EMPHASIS"
>/etc/system</I
> and rebooting.
&#13;</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x472.htm"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.htm"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x500.htm"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Setting Up the Cron Jobs</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c4.htm"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Starting the System</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>