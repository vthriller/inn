.\" $Revision$
.TH CONTROLCHAN 8
.SH NAME
controlchan \- channel\-fed control message handler
.SH SYNOPSIS
.B controlchan
.SH DESCRIPTION
.I Controlchan
removes the responsibility for handling control messages
(except cancels) from
.IR innd (8)
and instead processes them from a channel or file feed.
To reduce load,
.I controlchan
keeps a copy of
.I control.ctl
in memory and checks permissions (including any required PGP headers) before any
scripts are called.  Also, the default (``bad message'') case is handled
internally.  The ``drop'' case is handled with far less fuss.
.PP
Normally,
.I controlchan
is invoked by
.IR innd (8)
as configured in
.IR newsfeeds .
An example entry is below.  Make sure that you've created the newsgroup
control.cancel so that
.I controlchan
doesn't have to scan through cancels, which it won't process anyway.
.sp 1
.in +0.5i
.nf
controlchan!\\
   :!*,control,control.*,!control.cancel\\
   :Tc,Wnsm\\ 
   :<pathbin in inn.conf>/controlchan
.fi
.in -0.5i
.sp 1
Note that in the (very, very unlikely) event that you need to process
ihave/sendme control messages, be sure that
.I logipaddr
is set to false in
.IR inn.conf ,
because in this case controlchan needs a site name, not an IP address.
.sp 1
.I Controlchan
tries to report all log messages through
.IR syslog (3),
unless connected to an interactive terminal.  To enable
.IR syslog (3)'ing
for versions of Perl prior to 5.6.0,
you will need to have run ``h2ph'' on your
system include files at some point (this is required to
make ``Sys::Syslog'' work).  If you have not done so, do this:
.sp 1
.nf
.in +0.5i
cd /usr/include
h2ph * sys/*
.in -0.5i
.fi
.sp 1
If you run FreeBSD, you will need to run the following in addition:
.sp 1
.nf
.in +0.5i
h2ph machine/*
.in -0.5i
.fi
.SH HISTORY
Written by Katsuhiro Kondou <kondou@nec.co.jp> for InterNetNews.
.de R$
This is revision \\$3, dated \\$4.
..
.R$ $Id$
.SH "SEE ALSO"
control.ctl(5),
inn.conf(5).
