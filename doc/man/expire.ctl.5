.\" $Revision$
.TH EXPIRE.CTL 5
.SH NAME
expire.ctl \- control file for Usenet article expiration
.SH DESCRIPTION
The file
.I <pathetc in inn.conf>/expire.ctl
is the default control file for the
.IR expire (8)
program, which reads it at start-up.
It serves two purposes: it defines how long history entries for expired or
rejected articles are retained, and it determines how long articles not
stored in a self-expiring storage method are retained.
If all of the storage methods used by the server are self-expiring (such
as CNFS), only the /remember/ setting described below is necessary or
used.
.PP
Blank lines and lines beginning with a number sign (``#'') are ignored.
All other lines should be in one of two formats.
.PP
The first format specifies how long to keep history entries for articles
that aren't present in the news spool.
These are articles which have either already expired out of all newsgroups
or which the server rejected (and ``remembertrash'' was set to true in
.IR inn.conf (5)).
There should only be one line in this format, which looks like:
.RS
/remember/:days
.RE
where
.I days
is a floating-point number that specifies the minimum number of days a
history record of a given message ID is retained, regardless of whether
the article has expired.
(History entries are always retained at least until an article fully
expires.)
.PP
The reason to retain a record of an old articles is to handle the case
where a peer offers old articles that were previously accepted and then
expired.
Without a setting like this, the server would accept the article again and
readers would see duplicate articles.
Articles older than a certain number of days won't be accepted by the
server at all (see the ``\fB-c\fP'' flag of
.IR innd (8)),
and this setting should probably match that time period (14 days by
default) to ensure the server never accepts duplicates.
.PP
This setting does not affect article expirations.
.PP
Most of the lines in this file will be in the second format, four
colon-separated fields as follows:
.RS
.nf
classnum:keep:default:purge
.fi
.RE
Where
.I classnum 
is the number that you specified in
.IR storage.conf (5).
The 
rest of the fields are identical to the 5 field format.
If the line for
.I classnum
is not defined,
.IR keep ,
.I default
and
.I purge
are assumed to be all ``0''.
.PP
It is often useful to honor the expiration headers in articles, especially
those in moderated groups.
To do this, set
.I keep
to zero,
.I default
to whatever value you wish, and
.I purge
to never (or alternately set
.I purge
to some large number, like 365 days for a maximum article life of a year).
To ignore any Expires header, set all three fields to the same value.
.PP
There must be exactly one line with a
.I pattern
of ``*'' and a
.I modflags
of ``A'' \(em this matches all groups and is used to set the expiration
default.
It should be the first expiration line.
.SH EXAMPLES
.nf
##  How long to keep expired history
/remember/:5
##  class 0 stay for two weeks
0:14:14:14
.fi
.SH HISTORY
Written by Rich $alz <rsalz@uunet.uu.net> for InterNetNews.
.de R$
This is revision \\$3, dated \\$4.
..
.R$ $Id$
.SH "SEE ALSO"
expire(8),
inn.conf(5),
storage.conf(5),
wildmat(3).
